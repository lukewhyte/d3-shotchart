!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){function t(t){t.each(function(t){if(d3.select(this).style("max-width",e/16+"em"),d3.select(this).selectAll("svg").empty()){var a=d3.select(this).append("svg").attr("viewBox","0, 0, 50, 47").classed("court",!0);a.append("g").classed("court-paint",!0).append("rect").attr("width",16).attr("height",19).attr("x",25).attr("transform","translate(-8,0)").attr("y",r(19)),a.append("g").classed("inner-court-paint",!0).append("line").attr("x1",19).attr("x2",19).attr("y1",r(19)).attr("y2",r(0)),a.append("g").classed("inner-court-paint",!0).append("line").attr("x1",31).attr("x2",31).attr("y1",r(19)).attr("y2",r(0));var n=a.append("g").classed("foul-circle dashed",!0);n.append("defs").append("clipPath").attr("id","cut-off-top").append("rect").attr("width",12).attr("height",6).attr("x",25).attr("y",r(19)).attr("transform","translate(-6,0)"),n.append("circle").attr("cx",25).attr("cy",r(19)).attr("r",6).attr("stroke-dasharray","1,1").attr("clip-path","url(#cut-off-top)");var s=a.append("g").classed("foul-circle solid",!0);s.append("defs").append("clipPath").attr("id","cut-off-bottom").append("rect").attr("width",12).attr("height",6).attr("x",25).attr("y",r(19)).attr("transform","translate(-6,-6)"),s.append("circle").attr("cx",25).attr("cy",r(19)).attr("r",6).attr("clip-path","url(#cut-off-bottom)"),a.append("g").classed("backboard",!0).append("line").attr("x1",22).attr("x2",28).attr("y1",r(4)).attr("y2",r(4)),a.append("g").classed("rim",!0).append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",.75);var d=a.append("g").classed("restricted-area",!0);d.append("defs").append("clipPath").attr("id","restricted-cut-off").append("rect").attr("width",8).attr("height",4).attr("x",25).attr("y",r(4.75)).attr("transform","translate(-4,-4)"),d.append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",4).attr("clip-path","url(#restricted-cut-off)"),d.append("line").attr("x1",21).attr("x2",21).attr("y1",r(5.25)).attr("y2",r(4)),d.append("line").attr("x1",29).attr("x2",29).attr("y1",r(5.25)).attr("y2",r(4));var i=a.append("g").classed("three-point-area",!0);i.append("defs").append("clipPath").attr("id","three-point-cut-off").append("rect").attr("width",44).attr("height",23.75).attr("x",25).attr("y",r(4.75)).attr("transform","translate(-22,-23.75)"),i.append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",23.75).attr("clip-path","url(#three-point-cut-off)"),i.append("line").attr("x1",3).attr("x2",3).attr("y1",r(14)).attr("y2",r(0)),i.append("line").attr("x1",47).attr("x2",47).attr("y1",r(14)).attr("y2",r(0));var l=a.append("g").classed("key-lines",!0);l.append("line").attr("x1",16).attr("x2",17).attr("y1",r(7)).attr("y2",r(7)),l.append("line").attr("x1",16).attr("x2",17).attr("y1",r(8)).attr("y2",r(8)),l.append("line").attr("x1",16).attr("x2",17).attr("y1",r(11)).attr("y2",r(11)),l.append("line").attr("x1",16).attr("x2",17).attr("y1",r(14)).attr("y2",r(14)),l.append("line").attr("x1",33).attr("x2",34).attr("y1",r(7)).attr("y2",r(7)),l.append("line").attr("x1",33).attr("x2",34).attr("y1",r(8)).attr("y2",r(8)),l.append("line").attr("x1",33).attr("x2",34).attr("y1",r(11)).attr("y2",r(11)),l.append("line").attr("x1",33).attr("x2",34).attr("y1",r(14)).attr("y2",r(14)),a.append("g").classed("court-baseline",!0).append("line").attr("x1",0).attr("x2",50).attr("y1",r(0)).attr("y2",r(0)),a.append("g").classed("shots",!0)}else var a=d3.select(this).selectAll("svg")})}var e=500,a=.94*e;return t.width=function(r){return arguments.length?(e=r,a=.94*r,t):e},t}function a(){function t(t,e,a,r){d3.select(t).selectAll("."+a.playerID+r).data([a]).enter().append("circle").classed("shot",!0).classed("make",!0).classed("isSpur",function(t){return!!t.isSpur}).classed(a.playerID+r,!0).attr("cx",function(t){return t.x}).attr("cy",function(t){return d(t.y)}).attr("r",.5).on("mouseover",function(t){p&&e.show(t)}).on("mouseout",function(t){p&&e.hide(t)})}function e(t,e,a,r){d3.select(t).selectAll("."+a.playerID+r).data([a]).enter().append("path").classed("shot",!0).classed("miss",!0).classed("isSpur",function(t){return!!t.isSpur}).classed(a.playerID+r,!0).attr("transform",function(t){return"translate("+t.x+","+d(t.y)+") rotate(-45)"}).attr("d",d3.symbol().type(d3.symbolCross).size(.5)).on("mouseover",function(t){p&&e.show(t)}).on("mouseout",function(t){p&&e.hide(t)})}function a(a){a.each(function(a){var d=d3.select(this).select("svg").select(".shots"),x=d3.select(this).select("#legends"),y=f(a),g=u(y).map(h);if("scatter"===n){!1===x.empty()&&x.remove();var m=d.selectAll(".shot").data(a,function(t){return[t.x,t.y]});if(m.exit().transition().duration(1e3).attr("r",0).attr("d",u.hexagon(0)).remove(),p){var v=d3.tip().attr("class","d3-tip").offset([-8,0]).html(function(t){return t.shot_distance+"' "+t.action_type});d.call(v)}m.enter().each(function(a,r){a.shot_made_flag?t(this,v,a,r):e(this,v,a,r)})}else if("hexbin"===n){var m=d.selectAll(".shot").data(g,function(t){return[t.x,t.y]});if(m.exit().transition().duration(1e3).attr("r",0).attr("d",u.hexagon(0)).remove(),p){var v=d3.tip().attr("class","d3-tip").offset([-8,0]).html(function(t){return t.makes+" / "+t.attempts+" ("+i(t.shootingPercentage)+")"});d.call(v)}if(m.enter().append("path").classed("shot",!0).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).attr("d",u.hexagon(0)).on("mouseover",function(t){p&&v.show(t)}).on("mouseout",function(t){p&&v.hide(t)}).transition().duration(1e3).attr("d",function(t){if(t.length>=l)return t.length<=3?u.hexagon(o(0)):3<t.length&&t.length<=8?u.hexagon(o(1)):u.hexagon(o(2))}).style("fill",function(t){return c(t.shootingPercentage)}),!0===x.empty()){var w=d3.select(this).append("svg").attr("viewBox","0, 0, 50, 10").attr("id","legends"),b=w.append("g").classed("legend",!0),k=w.append("g").classed("legend",!0).classed("frequency",!0),A=7;b.append("text").classed("legend-text",!0).attr("x",40).attr("y",5).attr("text-anchor","middle").text("Efficiency"),b.append("text").classed("legend-text",!0).attr("x",34.25).attr("y",2.5).attr("text-anchor","end").text("cold"),b.append("text").classed("legend-text",!0).attr("x",45.75).attr("y",2.5).attr("text-anchor","start").text("hot"),b.selectAll("path").data(c.range()).enter().append("path").attr("transform",function(t,e){return"translate("+(35+1*(1+2*e))+", 2)"}).attr("d",u.hexagon(0)).transition().duration(1e3).attr("d",u.hexagon(1)).style("fill",function(t){return t}),b.selectAll("text").style("fill",function(){return"night"===s?"white":"day"===s?"black":void 0}),k.append("text").classed("legend-text",!0).attr("x",10.25).attr("y",5).attr("text-anchor","middle").text("Frequency"),k.append("text").classed("legend-text",!0).attr("x",6.25).attr("y",2.5).attr("text-anchor","end").text("low"),k.selectAll("path").data(r).enter().append("path").attr("transform",function(t,e){return"translate("+((A+=2*t)-t)+", 2)"}).attr("d",u.hexagon(0)).transition().duration(1e3).attr("d",function(t){return u.hexagon(t)}),k.append("text").classed("legend-text",!0).attr("x",13.75).attr("y",2.5).attr("text-anchor","start").text("high"),k.selectAll("text").style("fill",function(){return"night"===s?"white":"day"===s?"black":void 0}),k.selectAll("path").style("fill",function(){return"night"===s?"none":"day"===s?"grey":void 0})}}})}var r=[.8,1,1.2],l=1,c=d3.scaleQuantize().domain([0,1]).range(["#5458A2","#6689BB","#FADC97","#F08460","#B02B48"]),o=d3.scaleQuantize().domain([0,2]).range(r),p=!1,u=d3.hexbin().radius(1.2).x(function(t){return t.key[0]}).y(function(t){return d(t.key[1])}),f=function(t){var e=d3.nest().key(function(t){return[t.x,t.y]}).rollup(function(t){return{made:d3.sum(t,function(t){return t.shot_made_flag}),attempts:t.length,shootingPercentage:d3.sum(t,function(t){return t.shot_made_flag})/t.length}}).entries(t);return e.forEach(function(t){t.key=JSON.parse("["+t.key+"]")}),e},h=function(t,e){var a=d3.sum(t,function(t){return t.value.attempts}),r=d3.sum(t,function(t){return t.value.made}),n=r/a;return t.shootingPercentage=n,t.attempts=a,t.makes=r,t};return a.displayType=function(t){return arguments.length?(n=t,a):n},a.shotRenderThreshold=function(t){return arguments.length?(l=t,a):l},a.displayToolTips=function(t){return arguments.length?(p=t,a):p},a.theme=function(t){return arguments.length?(s=t,a):s},a}var r=d3.scaleLinear().domain([0,47]).rangeRound([47,0]),n="scatter",s="day",d=d3.scaleLinear().domain([0,47]).rangeRound([47,0]),i=d3.format(".2%");t.court=e,t.shots=a,Object.defineProperty(t,"__esModule",{value:!0})});